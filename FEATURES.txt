22.9.25

- membership cancellations
- basic reporting


15.9.2025

DONE - membership, should be able to take payment without using a card
  - can give discounts, say we just want to give them 1 month free we just apply a 100% discount
DONE VERIFIED IT BEHAVES THIS WAY - membership discounts only apply to the first payment - look into how Stripe does this
DONE - membership holds/pause (22.9.2025)
  DONE - settings, need to setup membership hold limitations (org.membershipSuspensionDaysPerYear in /settings)
  DONE - each company should be able to define how many days in a year a customer can hold membership for
  DONE - it should change their next billing cycle date (uses Stripe pause_collection)
  DONE - creates negative invoice item (credit) for the suspension period (limited to current billing period)
  DONE - tracks suspension history in membership.suspensions array (moved from customer model)
  DONE - enforces max suspension days per 365-day period from subscription start
  DONE - UI controls in customer detail page with pause/resume functionality (ellipsis menu)
  DONE - Stripe Connect support with connected accounts (org.stripeAccountId)
  DONE - Credit calculation properly limited to unused days in current billing period
  DONE - Resume functionality to end suspension early
  DONE - Graceful fallback when Stripe API fails (local pause still works)
  DONE - Check script: node scripts/check-stripe-subscription.js <sub_id> [acct_id]
  DONE - blocks customer from any membership related discounts while suspended (22.9.2025)
MOVED - membership cancellations
  - company wide cancellation policy.
  - how to handle 12 month vs 1 month memberships
DONE - ability to grant credits ($) to the customer account - manually assign (expiry) i.e. gift cards
- basic reporting
DONE - should be able to assign particular browser fixed always to a location (ADMIN only)
  - staff when they login to a terminal can't switch between locations, as its now locked to a particular
    location
DONE - customer email receipts should be off by default for shop items
  customers can as for it, in which case they can still receiive it.

Questions:
  - how will membership expiry work, i.e. after 6 months

8th Sep 2025
DONE - manual discounts, not authorizing a STAFF properly
DONE - test out surcharges
DONE - /manage/adjustments/[id]/edit adjustments / discounts need switch (inside the adjustment details card) to enable/disable auto assignment, for use in the cart during checkout. If the switch 
        is off it won't be automatically assigned when a customer is connected in the cart. It can however
        be selected from the discounts dropdown select and assigned that way.
DONE NOT DONE - hook up products/prices to adjustments
DONE - http://localhost:3000/manage/checkins - need to know if they've cancelled membership
  - checked in, cancelled, failed payment, membership on hold
  - also needs to be mobile friendly

25th Aug 2025
DONE - todo: purchase for 2x adults class - customer selection widget Panel not ideal UX
DONE - email receipts not going out for shop items
DONE - Product T&C
DONE - test location selection, make sure all pages filter for selected employee location
DONE - memberships
DONE - class products setup, define different class times per day
DONE - discounts
DONE  - discount editor via a Sheet as well as on settings page
DONE    so you can pop it open during memebership product creation as well.
DONE - attaching customers to transactions
DONE  - waiver required support
DONE - re-test Stripe payments after massive changes
DONE - re-test emails after massive changes



DONE - apply a custom discount - update to use new api endpoints
DONE - Look into when signing up as an adult on behalf of a child, the transaction
  should be tied to the adult
  needs to be a transaction account (person paying) and for children, still needs separate accounts



- Mobile app for customers


DONE - folders for shop items
DONE - bg colours for shop items, icons / images
DONE - customer management
DONE - add/lookup customer(s) at transaction time
DONE - checkout process for day pass
DONE - checkout process for courses / classes
DONE - backend Schedule table for classes courses
DONE - backend Orders table for shop items
DONE - ability to add multiple prices for classes/courses within a price.
DONE - waivers
DONE - Setting for a product/category to go to bump screen or not
DONE - Name field (not email/phone) required during checkout (only if bump screen item)
DONE - classes and courses - dedicated checkin button
DONE - bump screen for kitchen staff to see/manage orders - order table, filtering
DONE - admin / list view page for classes / courses
DONE - admin / list view page for casual entries
DONE - membership mumber assignment on creation
DONE - item description
DONE - ability to edit folder colour
DONE - waivers
DONE - DOB field for waiver and gender
DONE - course / class checkout, must check remaining capacity (no overbooking)
DONE - checkout shop item, folder should open into new screen (use breadcrumb menu)
DONE - During purchase have a hot button for cart at bottom right. Uses permanent side bar now for cart during the purchase process
DONE - use baked in calendar component instead of 3rd party one https://ui.shadcn.com/docs/components/calendar
DONE on transaction list view page- ability to look up previous sales and do refunds, etc
DONE - ability to add a discount at sale time
DONE - set end date 
DONE  - set recurring (expiry null)
DONE  - assign discounts to products, so they are automatically applied at checkout time.
DONE  - if a discount is product specific i.e. just to coffees, and there are other products (not coffees), then make sure the discount only gets applied to the relevant products
DONE - accounting categories, GST or not
DONE - transaction list view page
DONE - individual transaction view page, allow for refunds (partial and full), and view order details.

DONE - Login as any account staff, admin, MANAGER
DONE - PIN number per staff, required before any purchase when sale is clicked
DONE - need to make sure if logged in as admin role, Jnr staff can't see admin functions
DONE - need to select terminal when pos is first setup - set a cookie so it knows for next time.


DONE - when purchasing a shop item - make qty automatically 1
DONE - Par warning - only for manager, admin's

DONE - create new staff accounts
DONE - connect terminals to locations
DONE - roles for staff, admins, bump screens, terminals
DONE  - ADMIN, MANAGER, STAFF, TERMINAL
DONE - set a pin if no pin is set for new employees
DONE - terminal integration (using real terminal)
DONE - checkout process for subscriptions
DONE  - backend Membership table for memberships
DONE - ability to send manual receipts via email if no customer connected
DONE - waiver builder page
DONE - checkin page
DONE  - hook up checkin page functionality
DONE - Email out QR code for classes and courses & memberships
DONE  - ability scan the QR to checkin at the front entry with a dedicated device - should confirm they have checked in.
DONE  - dedicated page to see people checking in - list view, with status/ etc
DONE - custom discounts - should be able to assign arbitrary discount amounts or percentages at checkout time (at MANAGER level only)
DONE - Customer list view page
DONE - 4 digit PIN numbers - enforce some basic rules, i.e. not 1234, 1111, etc.

DONE - Par/qty screen
DONE  - par = min quantity before warning, i.e. to place another order with the supplier
DONE  - qty = click update qty - add/subttact or overrise total qty of stock (required for launch)
DONE  - list view of all items, should be able to edit product name/price also
DONE  - notifications when stock (par) is low - alert / bell icon down the bottom left
DONE  - ability to filter for items below or at par, or cloase to par

DONE - waiver text builder
DONE - waiver update handler

NICE TO HAVES
-----------------------
  - tag system - new feature too add generic tags per product
  - basic accounting reporing
  - stock items need to have a customer assigned to them, i.e. pair of shoes for warrenty.
  - export CSV of purchases (for marketing purposes)
  - ability to edit orders, after its complete - i.e. they wanted a chololate shake instead of vanilla
  - specify what products at what locations

  - FOB gate entry based on memberships
  - customer rewards & reward packages assigned to products
  - gift cards
  - grouping together multiple products - for example a school holiday program
    - e.g. 1x drink, 1x class
    - also regarding stock qty, it should deduct the qty on the day of the event
    - should also add to the bump screen any items that need making on the day of the event
  - marketing
  - ?lookup existing customer before completing waiver, might have bought coffee previously, but wants gym membership





